# AWK

### awk 常用选项与参数

| Option | Description |
| ------ | ----------- |
| -F     | 指定分隔符       |

### awk常用的内置变量

| Variable | Description                               |
| -------- | ----------------------------------------- |
| FILENAME | 当前输入文件名，若有多个文件，则只表示第一个。如果输入是来自标准输入，则为空字符串 |
| $0       | 当前记录的内容                                   |
| $N       | N表示字段号，最大值为NF变量的值                         |
| FS       | 字段分隔符，由正则表达式表示，默认为" "空格                   |
| RS       | 输入记录分隔符，默认为"\n"，即一行为一个记录                  |
| NF       | 当前记录字段数                                   |
| NR       | 已经读入的记录数                                  |
| FNR      | 当前输入文件的记录数，请注意它与NR的区别                     |
| OFS      | 输出字段分隔符，默认为" "空格                          |
| ORS      | 输出记录分隔符，默认为"\n"                           |

```
awk -F ":" '{print NR,$1,$NF}' test.txt

# 打印test.txt文件内容中以:分隔后的第一列和最后一列并显示行号
```

```
awk 'NR==2,NR==3' test.txt

# 打印test.txt文件内容中第2行与第3行的内容
```

```
awk 'NR>1,NR<4' test.txt

# 打印test.txt文件内容中第2行与第3行的内容
```

```
awk 'NR==2{print $2}' test.txt

# 打印test.txt文件内容中第2行第2列的内容
```

```
# 查看本机正在使用的端口并排序显示

netstat -lntup | awk 'NR>2 {print $4}' | awk -F ":" '{print $NF}' | sort -n | uniq | nl
```
